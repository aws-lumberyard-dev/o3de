/*
 * Copyright (c) Contributors to the Open 3D Engine Project.
 * For complete copyright and license terms please see the LICENSE at the root of this distribution.
 *
 * SPDX-License-Identifier: Apache-2.0 OR MIT
 *
 */

 // Based on https://github.com/sebh/UnrealEngineSkyAtmosphere by SÃ©bastien Hillaire

#define ENABLE_ATMOSPHERE_SHADOWS 0

#include <SkyAtmosphereCommon.azsli>


#define LUT_SIZE_UINT 32
#define LUT_SIZE_FLOAT 32.0

[numthreads(LUT_SIZE_UINT, LUT_SIZE_UINT, LUT_SIZE_UINT)]
void SkyVolumeLUTCS(uint3 dispatch_id: SV_DispatchThreadID)
{
    float r = float(dispatch_id.x) / LUT_SIZE_FLOAT;
    float g = float(dispatch_id.y) / LUT_SIZE_FLOAT;
    float b = float(dispatch_id.z) / LUT_SIZE_FLOAT;

    uint3 outPixel = dispatch_id.xyz;

    //uint3 outputDimensions;
    //PassSrg::m_lutTexture.GetDimensions(outputDimensions.x, outputDimensions.y, outputDimensions.z);

    PassSrg::m_lutTexture[outPixel] = float4(r,g,b, 1.0);
}
